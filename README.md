# Bangumi Data Helper

[![Node version](https://badgen.net/npm/node/bangumi-data-helper?icon=https://simpleicons.now.sh/node-dot-js/fff)](https://nodejs.org)
[![NPM version](https://badgen.net/npm/v/bangumi-data-helper?icon=npm)](https://www.npmjs.com/package/bangumi-data-helper)
[![License](https://badgen.net/npm/license/bangumi-data-helper?icon=https://api.iconify.design/octicon:law.svg?color=white)](https://github.com/bangumi-data/helper/blob/master/LICENSE)

Bangumi Data Helper æ˜¯ä¸€ä¸ªå‘½ä»¤è¡Œè¾…åŠ©å·¥å…·ï¼Œç”¨äºç®€åŒ– [Bangumi Data](https://github.com/bangumi-data/bangumi-data) çš„æ•°æ®ç»´æŠ¤å·¥ä½œã€‚bdh å¯ä»¥å®Œæˆå¤§å¤šæ•°çš„é‡å¤æ€§å·¥ä½œï¼Œä½†ç”±äºå„ä¸ªç«™ç‚¹å„ä¸ªä¿¡æ¯çš„ä¸ç¡®å®šå› ç´ è¾ƒå¤šï¼Œçˆ¬å–åˆ°çš„ç»“æœè¿˜éœ€äººå·¥å®¡æ ¸ä¸€éã€‚

## Installation

```bash
npm i -g bangumi-data-helper
```

é€‚ç”¨äº [![Bangumi Data version](https://badgen.net/badge/bangumi-data/0.3.x)](https://github.com/bangumi-data/bangumi-data)

## Usage

éœ€è¦åœ¨ bangumi-data é¡¹ç›®ç›®å½•ä¸‹è¿è¡Œã€‚

```bash
# æŸ¥çœ‹å¸®åŠ©
bdh --help
# ç”ŸæˆæŸå­£åº¦çš„åˆå§‹æ•°æ®
bdh create 2016q4
# æ›´æ–°æŸæœˆçš„ç•ªç»„æ•°æ®
bdh update 201610
# æ ¹æ®bangumiæ·»åŠ ç•ªå‰§æ•°æ®
bdh add 207195
# æ ¹æ®bangumiæ·»åŠ ç•ªå‰§æ•°æ®, å¹¶åŒæ—¶æ·»åŠ 1ä¸ªæ”¾é€ç«™ç‚¹
bdh add 207195 nicovideo:yurucamp
# æ ¹æ®bangumiæ·»åŠ ç•ªå‰§æ•°æ®, å¹¶åŒæ—¶æ·»åŠ å¤šä¸ªæ”¾é€ç«™ç‚¹
bdh add 207195 nicovideo:yurucamp gamer:89804
# äº¤äº’å¼åœ°æ‰‹åŠ¨å¢åŠ æŸæœˆçš„æ”¾é€ç«™ç‚¹
bdh edit 201610
# è¡¥å®ŒæŸç«™çš„æ‰€æœ‰ç•ªå‰§
bdh hokan iqiyi
# è¡¥å……æ‰€æœ‰ end å­—æ®µä¸ºç©ºçš„ç•ªå‰§
bdh end
# æ¸…ç†å·²ä¸‹æ¶ç•ªç»„
bdh cleanup bilibili
# ä½¿ç”¨ä»£ç†
HTTP_PROXY=http://127.0.0.1:1087 bdh hokan nicovideo
```

### `bdh create <season>`

è¯¥å‘½ä»¤ä¼šæ ¹æ® [cal.syoboi.jp](http://cal.syoboi.jp/quarter/) çš„æ•°æ®ï¼Œåˆ›å»ºæŒ‡å®šå­£åº¦çš„åˆå§‹æ•°æ®ï¼ŒåŒ…æ‹¬æ—¥æ–‡æ ‡é¢˜ã€è‹±æ–‡æ ‡é¢˜ã€å®˜ç½‘ã€æ”¾é€å¼€å§‹æ—¶é—´ã€ç•ªå‰§ç±»å‹ã€Bangumi.tv å¯¹åº”æ¡ç›®ã€‚æœ‰äº›ç•ªç»„ä¸åŒ…å«æ”¾é€å¼€å§‹æ—¶é—´ï¼Œè¿™äº›æ•°æ®ä¼šè¢«æ”¾å…¥ `data/items/0000/00.json` å¾…äººå·¥å¤„ç†ã€‚

### `bdh update <month>`

åœ¨æ·»åŠ ç»´æŠ¤æ”¾é€ç«™ç‚¹ä¿¡æ¯æ—¶ï¼Œå¯ä»¥åœ¨ `sites` æ•°ç»„ä¸­æ·»åŠ [ç•ªå‰§é¡µé¢é“¾æ¥](https://github.com/bangumi-data/bangumi-data/blob/master/CONTRIBUTING.md#%E7%AB%99%E7%82%B9-url-%E6%8B%BC%E6%8E%A5)æˆ–åŒ…å« `site` å’Œ `id` ä¿¡æ¯çš„å¯¹è±¡ï¼Œä¾‹å¦‚ï¼š

```js
{
  // ...
  "sites": [
    "http://www.iqiyi.com/a_19rrh9uqb5.html",
    // æˆ–è€…
    {
      "site": "iqiyi",
      "id": "a_19rrh9uqb5"
    }
  ]
}
```

åœ¨å½“å‰æ–‡ä»¶ä¿®æ”¹å®Œåï¼Œå¯ä»¥è¿è¡Œè¯¥æŒ‡ä»¤æŠŠå½“å‰æ–‡ä»¶æ‰€æœ‰ç•ªå‰§çš„ `sites` æ•°ç»„å¤„ç†æˆç¬¦åˆè§„èŒƒçš„æ ¼å¼ï¼Œéæ¨¡å‹å®šä¹‰çš„å­—æ®µä¼šè¢«è‡ªåŠ¨å»é™¤ã€‚æ³¨æ„ï¼Œç”±äºéƒ¨åˆ†ç«™ç‚¹æ”¾é€å¼€å§‹æ—¶é—´ä¸ºæ— è§„å¾‹çš„ä¸­æ–‡ï¼Œéš¾ä»¥ç”¨ç¨‹åºè§£æï¼Œéœ€è¦æ‰‹åŠ¨è½¬æ¢ã€‚

### `bdh add <bangumiId> [siteList..]`

æ ¹æ®Bangumiä¸Šçš„æ•°æ®æ·»åŠ ç•ªå‰§æ•°æ®, å¯ä»¥åŒæ—¶æ·»åŠ æ”¾é€ç«™ç‚¹ä¿¡æ¯ã€‚

### `bdh edit <month>`

äº¤äº’å¼åœ°æ‰‹åŠ¨æ·»åŠ ç•ªå‰§æ”¾é€ç«™ç‚¹ä¿¡æ¯ã€‚

### `bdh hokan <site>`

hokan å³ä¸ºè¡¥å®Œï¼ˆ[ç•ªçµ„è£œå®Œè¨ˆç”»](https://github.com/bangumi-data/bangumi-data/issues/11)ï¼‰ï¼Œå…¶å·¥ä½œæ¨¡å¼ä¸ºï¼šçˆ¬å–åˆ°æŸç«™æ‰€æœ‰çš„ç•ªå‰§æ•°æ®ï¼Œç„¶åè‡ªåŠ¨è¿‡æ»¤æ‰å·²å­˜åœ¨äº bangumi-data çš„ç•ªå‰§å’Œ[æ’é™¤åˆ—è¡¨](https://github.com/bangumi-data/helper/tree/master/exclusions)é‡Œçš„ç•ªå‰§ï¼Œå‰©ä¸‹çš„å°±æ˜¯å¾…æ·»åŠ æˆ–å¾…æ’é™¤çš„ç•ªå‰§ã€‚

æ‰§è¡Œè¯¥æŒ‡ä»¤åï¼Œä¼šåœ¨ `data/items/0000/<site>.json` ä¸‹è¾“å‡ºå¾…è¡¥å®Œæ•°æ®ã€‚å¤åˆ¶ç•ªå‰§å¯¹è±¡åˆ° `sites` æ•°ç»„ä¸­æŒ‰ `bdh update <month>` ç»§ç»­åç»­æµç¨‹ã€‚å¯¹äºéæ­£å¸¸ç•ªå‰§ï¼ˆå¦‚ä¹±å…¥çš„[ç«™æ–¹è‡ªåˆ¶èŠ‚ç›®](https://www.iqiyi.com/a_19rrh5w971.html)ã€ç‰¹å…¸ã€å¹¿æ’­å‰§ã€èˆå°å‰§ã€ç‰¹æ‘„ã€çœŸäººç‰ˆç­‰ï¼‰ï¼Œè¯· PR æ·»åŠ åˆ°[æ’é™¤åˆ—è¡¨](https://github.com/bangumi-data/helper/tree/master/exclusions)ã€‚

### `bdh end`

è¿è¡Œè¯¥æŒ‡ä»¤å°†å¯»æ‰¾æ‰€æœ‰ end å­—æ®µä¸ºç©ºçš„ç•ªå‰§å¹¶å°è¯•è¡¥å……ã€‚åªä¼šè¡¥å……æ”¾é€ç»“æŸæ—¶é—´åœ¨æœ¬æœˆä¹‹å‰çš„ç•ªå‰§ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼ŒæŸç•ªå‰§æœ¬æœˆ 1 æ—¥å®Œç»“ï¼Œåœ¨æœ¬æœˆ 30 æ—¥è¿è¡Œè¯¥æŒ‡ä»¤æ˜¯æ— æ•ˆçš„ã€‚

### `bdh cleanup <site>`

æ¸…ç†æŸç«™å·²ä¸‹æ¶ç•ªç»„ï¼Œå…¶å·¥ä½œæ¨¡å¼ä¸ºï¼šçˆ¬å–è¯¥ç«™`hokan`çš„ç•ªå‰§æ•°æ®ï¼Œç„¶åæ¯”å¯¹å­˜åœ¨äºbangumi-data çš„ç•ªå‰§ï¼Œæ“­å¾—å¯èƒ½å·²ä¸‹æ¶çš„ç•ªå‰§ï¼Œåœ¨å†æ¬¡ç¡®å®šå·²ä¸‹æ¶åä»ç•ªå‰§æ•°æ®ä¸­æ¸…é™¤

## Status

ä¸‹è¡¨åˆ—ä¸¾äº†å½“å‰è‡ªåŠ¨åŒ–æƒ…å†µï¼Œâœ”ï¸è¡¨ç¤ºå¯ä»¥è‡ªåŠ¨è·å–ï¼Œâœ–ï¸è¡¨ç¤ºä¸èƒ½ï¼Œâ­•è¡¨ç¤ºéœ€è¦æ‰‹åŠ¨ä¿®æ”¹ï¼ŒğŸš§è¡¨ç¤ºå¾…ä¿®ã€‚

| site      | begin | è¡¥å®Œ | è‡ªåŠ¨åŒ¹é…ç°æœ‰ç•ªç»„ | æ¸…ç† |
| --------- | ----- | --- | --------------- | ---- |
| abema     | âœ–ï¸    | âœ”ï¸  | âœ”ï¸             | âœ”ï¸  |
| acfun     | âœ”ï¸    | âœ”ï¸  | âœ”ï¸             | âœ”ï¸  |
| bilibili  | âœ”ï¸    | âœ”ï¸  | âœ”ï¸             | âœ”ï¸  |
| bilibili_hk_mo_tw |âœ”ï¸|âœ”ï¸| âœ”ï¸             | âœ”ï¸  |
| bilibili_hk_mo| âœ”ï¸| âœ”ï¸  | âœ”ï¸             | âœ”ï¸  |
| bilibili_tw | âœ”ï¸  | âœ”ï¸  | âœ”ï¸             | âœ”ï¸  |
| crunchyroll | âœ”ï¸    | âœ”ï¸  | âœ”ï¸           | âœ”ï¸  |
| danime    | âœ”ï¸    | âœ”ï¸  | âœ”ï¸             | âœ”ï¸  |
| disneyplus| âœ–ï¸    | âœ”ï¸  | âœ”ï¸             | âœ”ï¸  |
| gamer     | âœ”ï¸    | âœ”ï¸  | âœ”ï¸             | âœ”ï¸  |
| gamer_hk  | âœ”ï¸    | âœ”ï¸  | âœ”ï¸             | âœ”ï¸  |
| iqiyi     | âœ”ï¸    | âœ”ï¸  | âœ–ï¸             | âœ–ï¸  |
| letv      | âœ–ï¸    | âœ”ï¸  | âœ–ï¸             | âœ”ï¸  |
| mgtv      | âœ”ï¸    | ğŸš§  | âœ–ï¸             | âœ–ï¸  |
| mytv      | âœ”ï¸    | âœ”ï¸  | âœ”ï¸             | âœ”ï¸  |
| netflix   | âœ”ï¸    | âœ”ï¸â“| âœ”ï¸             | âœ”ï¸  |
| nicovideo | âœ”ï¸    | âœ”ï¸  | âœ”ï¸             | âœ–ï¸  |
| qq        | â­•    | âœ”ï¸  | âœ–ï¸             | âœ–ï¸  |
| tropics   | âœ”ï¸    | âœ”ï¸  | âœ”ï¸             | âœ”ï¸  |
| unext     | âœ”ï¸    | âœ”ï¸  | âœ”ï¸             | âœ”ï¸  |
| viu       | âœ”ï¸    | âœ”ï¸  | âœ”ï¸             | âœ”ï¸  |
| youku     | âœ”ï¸    | ğŸš§  | âœ–ï¸             | âœ–ï¸  |
| youtube   | â­•    | âœ”ï¸  | âœ”ï¸             | âœ”ï¸  |
